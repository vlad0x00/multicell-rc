#!/bin/bash

ITERATIONS=30

cd "$( cd "$(dirname "$0")" >/dev/null 2>&1 ; pwd -P )"
cd ..

params=""
echo $params

accuracies=()
for i in $(seq $ITERATIONS); do
  printf "\rIteration: $i / $ITERATIONS"
  accuracies+=($(./run $params | grep "Testing accuracy" | awk '{ print $3 }'))
done

sum=$(IFS="+"; bc <<< "${accuracies[*]}")
len=${#accuracies[@]}

echo $(bc <<< "scale=2; $sum / $len")
